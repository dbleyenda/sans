define(["jquery","underscore","backbone","text!templates/projects/projectsTemplate.html","precook"],function(a,b,c,d){var e=c.View.extend({el:"#id_projects",loaded:!1,events:{"click a.unload":"onUnloadPageClicked","mouseenter .item > a":"onProjectMouseEnter","mouseleave .item > a":"onProjectMouseLeave"},initialize:function(){this.preloadImages("projects")},render:function(){var a=b.template(d);return this.$el.html(a({})),this.loaded||(this.$el.removeClass(),this.loaded=!0),this},preloadImages:function(a){var b=this,c=new Precook;c.on("preloader:configLoaded",function(){c.load(a)}),c.on("preloader:completed",function(a){b.loadPage()}),c.setConfig(IMAGES_JSON)},loadPage:function(){a("body").removeClass("white-logo"),a("body").removeClass("loader"),a(".layout section").addClass("loading"),a("body > .grid").removeClass("loading"),a("#id_menu").removeClass("hidden"),a("#id_menu").removeClass("opened"),a("body").css("overflow","hidden"),a("body").removeClass("menu-page"),a("body").removeClass("home-page"),a("body").removeClass("about-page"),a("body").removeClass("detail-page"),a("body").addClass("projects-page"),this.render()},onProjectMouseEnter:function(b){var c=a(b.currentTarget).attr("href").split("#/projects/")[1];this.$el.addClass("work-"+c)},onProjectMouseLeave:function(b){var c=a(b.currentTarget).attr("href").split("#/projects/")[1];this.$el.removeClass("work-"+c)},onUnloadPageClicked:function(b){b.preventDefault(),this.$el.addClass("loading"),a("body > .grid").addClass("loading"),setTimeout(function(){window.location.href=a(b.currentTarget).attr("href")},550)},destroy:function(){var a=this;setTimeout(function(){a.undelegateEvents(),a.$el.removeData().unbind(),a.remove(),c.View.prototype.remove.call(a)},550)}});return e});